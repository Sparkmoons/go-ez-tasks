## Сети, процессы, потоки итд

Тут я попытаюсь собрать информацию, которую нужно и полезно знать разработчику.

### 1 января 1983 - День рождения Интернета

## Процессы и потоки

___Процесс___ - программа в состоянии выполнения. Каждому процессу системой присваеиыается уникальный идентификационный номер (PID). Процесс состоит из: 1) код программы, 2) данные для функционирования кода, 3) контекст процесса (вся информация для управления процессом). 

При запуске одной программы многократно, например калькулятор, в ос системе создается столько же процессов, каждый из которых независим друг от друга и изолированным. Обладает собственным адресным пространством и средой выполнения. 

Благодаря поддержке Copy on write данные не дублируются в физической памяти без необходимости. Копия создается лишь в тот момент, когда происходит ее изменения.  (Отсюда и название - механизм копирования при записи). 

При загрузке ОС происходит создание базовых процессов : 
1) Ядро
Ядро вызывает создание несколько служебных процессов: 
1) Бездействие системы (system idle PID=0)
2) Первый настоящий процесс PID=4 - представляет ядро операционной системы. 
3) Инициализационная задача ядра для запуска системного менеджера сессий. SMSS (Session Manager Subsystem Service)
4) SMSS загружает остальные процессы для полной инициализации системы. 

### Unix подобные системы
Fork - копия вызывающего процесс (дочерний процесс). Создает два параллельных потока выполнения, вызывается один раз, а выполняется два раза. 

Exec - замещает образ дочернего процесса  новой командой для выполнения. 

После fork родительский и дочерние процессы обладают раздельными адресными пространствами. 


### Windows 
Вызывает единый системный вызов NtCrwateProcess(), который отвечает за создание новых процессов. В нем много параметров, благодаря чему он обладает высокой мощностью и гибкостью в управлении процессами. 

___Потоки___
Основная идея состоит в Отделении понятия процесса, то есть адресного пространства и ресурсов ОС от базовой единицы выполнения, известной как поток. 
Современные ОС придерживаются этой концепции и поддерживают два основных объекта: 1) процесс - который определяет общее адресное пространство и общие атрибуты процесса, 2) поток - который определяет последовательный поток выполнения в рамках этого процесса. 

Поток привязываются к одному процессу, но в одном адресном пространстве может быть множество потоков, что обеспечивает легкий доступ к общим данным. Создание потоков занимает очень мало времени, поскольку не требуется заново выделять адресное пространство или создавать объемные блоки управления процессами PCB, достаточно лишь информации для управления потоками. 

Таким образом объектом управления в ОС становятся потоки, а процессы служат контейнерами для их выполнения. 

В ядре ОС присутствуют системные вызовы, предназначенные для создания новых потоков. Создают блок управления потоками TCB (Thread Control Block) и присваивают им уникальный идентификатор потока TID (Thread IDentifier). 
User Mode Threads - потоки, управляемые по режиму пользователя. 

## DNS
DNS (Domain NAme System) - позволяет по доменному имени определить ip-адрес компьютера. 
 ( Поиск начинается с корневого домена, отправляется запрос на доменное имя. Корневой адрес отправляет ответ - не знает его ip-адрес, но знает ip-адрес днс сервера, которому делегировано управление зоной. ИТД)
Может работать в двух режимах:
1) Итеративный (Если сервер отвечает за ту зону, к которой пришел запрос - возвращает ответ. Если нет - возвращает адрес DNS сервера к которому нужно обратиться с запросом)
2) Рекурсивный (Сервер сам отправляет запросы всем DNS серверам пока не получит ответ)
Когда найден ip-адрес некоторого доменного имени - его помещают в кэш.
Состоит из:
1) Заголовок (Идентификатор запроса, Флаги, Количество запросов, Количество ответов, Количество авторитетных ответов, Количество дополнительных ответов)
2) Данные (Запросы DNS((Имя, Тип записи, Класс записи)), Ответы DNS((Имя, Тип записи, Класс записи, Время жизни(TTL), Длина данных, Данные)), Авторитетные серверы, Дополнительная информация)

## HTTP/HTTPS
HTTP (HyperText Transfer Protocol) - протокол передачи гипертекста. Прикладной протокол передачи данных в сети.
(Стартовая строка - Заголов - Тело сообщения) Все эти данные передаются в открытом виде.

HTTPS (HyperText Transfer Protocol Secure) - расширение протокола HTTP, безопасный протокол передачи гипертекста поддерживающий шифрование посредством криптографических протоколов SSL и TLS.
  SSL (Secure Sockets Layer) - при подключении к сайту просим идентифицировать его и получаем в ответ копию его SSL сертификата, доказывающий, что общаться с ним безопасно. Если все хорошо - начнется обмен шифрованными данными.
  TLS (Transport Layer Security) - также проверяет подлинность сервера и шифрует данные. Сейчас используют TLS1.2 и TLS1.3. Конфиденциальность, Целостность, Аутентификация (Ссылка начинается с https - соединение по TLS).

Различия HTTP и HTTPS:
1) HTTPS не является отдельным протоколом передачи данных, а представляет собой расширение протокола HTTP с надстройкой шифрования
2) Передаваемые по протоколу HTTP данные не защищены, HTTPS обеспечивает конфиденциальность информации путем ее шифрования
3) HTTP использует порт 80, HTTPS - порт 443.

## TCP + UDP
TCP (Transfer Control Protocol) - транспортный протокол передачи данных в сетях TCP/IP, предварительно устанавливающий соединение с сетью. Требует подтверждения получения пакета данных, для этого необходимо установленное заранее соединение. Считается надежным, исключает потери данных, дублирование, задержки и перемешивание пакетов. Контролирует загруженность соединения. Подходит для почтовых программ.

UDP (User Datagram Protocl) - транспортный протокол, передающий сообщения-датаграммы без необходимости установки соединения в IP-сети. Ненадежный протокол, но гораздо быстрее чем TCP. Ничего не контролирует, кроме целостности полученных данных. Подходит для сетевых/браузерных игр, приложений просмотра видео и видеосвязи. (Так как он быстрый и рассчитан на широкую пропускную способность)

## NAT
NAT (Network Address Translation) - переводит приватные адреса в общедоступные. Это позволяет устройству с частным адресом IPv4 обращаться к ресурсам за пределами его частной сети. NAT в сочетании с частными адресами IPv4 оказался полезным методом сохранения общедоступных IPv4-адресов. Один общедоступный IPv4-адрес может быть использован сотнями, даже тысячами устройств, каждый из которых имеет частный IPv4-адрес. NAT имеет дополнительное преимущество, заключающееся в добавлении степени конфиденциальности и безопасности в сеть, поскольку он скрывает внутренние IPv4-адреса из внешних сетей.

Сети обычно проектируются с использованием частных IP адресов. Это адреса 10.0.0.0/8, 172.16.0.0/12 и 192.168.0.0/16. Эти частные адреса используются внутри организации или площадки, чтобы позволить устройствам общаться локально, и они не маршрутизируются в интернете. Чтобы позволить устройству с приватным IPv4-адресом обращаться к устройствам и ресурсам за пределами локальной сети, приватный адрес сначала должен быть переведен на общедоступный публичный адрес.

## IPv4 + IPv6

IPv4 (Internet Protocol version 4) и IPv6 (Internet Protocol version 6) - это две разные версии Интернет-протокола, который определяет способ передачи и получения данных через Интернет.

IPv4 - это первоначальная версия Интернет-протокола, а IPv6 - более новая версия, разработанная для устранения ограничений IPv4. Одним из основных ограничений IPv4 является ограниченное адресное пространство, в котором можно использовать только 32-разрядные десятичные числа.

В отличие от этого, адреса IPv6 являются 128-разрядными, что обеспечивает большие блоки и практически неограниченное количество уникальных адресов. Увеличение числа доступных адресов в IPv6 позволяет подключать к Интернету большее количество устройств, поскольку мы движемся к более связанному будущему с растущим числом устройств.

Большинство современных устройств поддерживают как IPv4, так и IPv6, однако некоторые старые аппаратные средства могут поддерживать только один или другой вариант. Таким образом, переход на IPv6 становится все более важным для обеспечения непрерывной связи.

## 12FA

1) Кодовая база (Одна кодовая база, отслеживаемая в системе контроля версий, множество развертываний)

2) Зависимости (Явно объявляйте и изолируйте поля)
   
3) Конфигурация (Сохраняйте конфигурацию в среде выполнения)
   
4) Сторонние сервисы (Backing Services) (Считайте сторонние службы подключаемыми ресурсами)

5) Сборка, релиз, выполнение (Строго разделяйте стадии сборки и выполнения)

6) Процессы (Запускайте приложения как оидн или несколько процессов несохраняющих внутреннее состояние (Stateless))

7) Связка портов (Port Binding) (Экспортируйте сервисы через привязку портов)

8) Параллелизм (Масштабируйте приложение с помощью процееов)

9) Утилизируемость (Disposability) (Максимизируйте надежность с помощью быстрого запуска и корректного завершения работы)

10) Паритет разработки/работы приложения (Держите окружение разработки промежуточного развертывания (Staging) и рабочего развертывания (Production) максимально похожими)

11) Журанлирование (Logs) (Рассматривайте журнал как поток событий)

12) Задачи администрирования (Выполняйте задачи администрирования/управления с помощью разовых процессов)
